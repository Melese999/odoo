<?xml version="1.0" encoding="UTF-8"?>
<!--<templates xml:space="preserve">
    <t t-name="SketchWidget">
        <div class="o_sketch_widget">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h6 class="text-primary mb-0">
                    <i class="fa fa-pencil me-2"></i>
                    Design Sketch Editor
                </h6>
                <div class="btn-group">
                    <button type="button" class="btn btn-sm btn-outline-secondary o_sketch_undo" title="Undo">
                        <i class="fa fa-undo me-1"></i>
                    </button>
                    <button type="button" class="btn btn-sm btn-outline-secondary o_sketch_redo" title="Redo">
                        <i class="fa fa-repeat me-1"></i>
                    </button>
                    <button type="button" class="btn btn-sm btn-outline-danger o_sketch_clear" title="Clear Canvas">
                        <i class="fa fa-eraser me-1"></i>
                        Clear
                    </button>
                    <button type="button" class="btn btn-sm btn-primary o_sketch_save">
                        <i class="fa fa-save me-1"></i>
                        Save Sketch
                    </button>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <div class="d-flex align-items-center gap-3">
                        <div class="d-flex align-items-center">
                            <label class="me-2 text-muted small">Color:</label>
                            <input type="color"
                                   class="form-control form-control-color o_sketch_color"
                                   value="#000000"
                                   title="Select drawing color"/>
                        </div>

                        <div class="d-flex align-items-center">
                            <label class="me-2 text-muted small">Width:</label>
                            <select class="form-select form-select-sm o_sketch_width" style="width: 80px;">
                                <option value="1">Thin</option>
                                <option value="3">Medium</option>
                                <option value="5">Thick</option>
                                <option value="8">Very Thick</option>
                            </select>
                        </div>

                        <div class="d-flex align-items-center">
                            <i class="fa fa-eye"></i>
                            <span class="me-2 text-muted small">
                                 Preview
                            </span>
                            <div class="o_sketch_tool_preview rounded-circle"
                                 style="width: 3px; height: 3px; background-color: #000000; border: 1px solid #ccc;">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="d-flex justify-content-end gap-2">
                        <button type="button" class="btn btn-sm btn-outline-secondary o_sketch_tool active"
                                data-tool="pen" title="Pen Tool">
                            <i class="fa fa-pencil"></i>
                        </button>
                        <button type="button" class="btn btn-sm btn-outline-secondary o_sketch_tool"
                                data-tool="eraser" title="Eraser">
                            <i class="fa fa-eraser"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="alert alert-info alert-sm mb-3">
                <i class="fa fa-info-circle me-1"></i>
                <strong>Drawing Instructions:</strong>
                Use mouse or touch to draw.
                <span t-if="isTouchDevice">Touch and drag to draw.</span>
                <span t-if="!isTouchDevice">Click and drag to draw.</span>
                Use undo/redo to correct mistakes.
            </div>

            <div class="o_sketch_canvas_container mb-3" t-ref="container">
                <canvas
                        t-ref="canvas"
                        width="600"
                        height="600"
                        style="border: 2px solid #dee2e6; border-radius: 4px; cursor: crosshair;
                           background: white; display: block; width: 100%;"
                        class="shadow-sm"
                ></canvas>
            </div>

            <div class="d-flex justify-content-between align-items-center text-muted small">
                <div>
                    <i class="fa fa-arrows-h me-1"></i>
                    <span>Drag to draw</span>
                </div>
                <div>
                    <i class="fa fa-lightbulb-o me-1"></i>
                    <span>Press Ctrl+Z to undo</span>
                </div>
            </div>
        </div>
    </t>
</templates>-->

<templates xml:space="preserve">
    <t t-name="CommissionSketchWidget" owl="1">
        <div class="o_sketch_widget d-flex flex-column h-100">
            <!-- Toolbar -->
            <div class="o_sketch_toolbar d-flex align-items-center p-2 gap-2 border-bottom">
                <!-- Tools -->
                <button type="button" class="btn btn-light o_sketch_tool" data-tool="pen" title="Pen">
                    <i class="fa fa-pencil"/> Pen
                </button>
                <button type="button" class="btn btn-light o_sketch_tool" data-tool="eraser" title="Eraser">
                    <i class="fa fa-eraser"/> Eraser
                </button>
                <button type="button" class="btn btn-light o_sketch_tool" data-tool="measure" title="Measure">
                    <i class="fa fa-ruler"/> Measure
                </button>

                <!-- Color picker -->
                <label class="d-flex align-items-center gap-1 mb-0">
                    <span>Color:</span>
                    <input type="color" class="o_sketch_color form-control form-control-color"/>
                </label>

                <!-- Line width -->
                <label class="d-flex align-items-center gap-1 mb-0">
                    <span>Width:</span>
                    <select class="o_sketch_width form-select">
                        <option value="1">1px</option>
                        <option value="2">2px</option>
                        <option value="3" selected="selected">3px</option>
                        <option value="5">5px</option>
                        <option value="8">8px</option>
                        <option value="10">10px</option>
                    </select>
                </label>

                <!-- Measurement controls (only visible when measure tool is active) -->
                <t t-if="state.isMeasuring">
                    <label class="d-flex align-items-center gap-1 mb-0">
                        <span>Unit:</span>
                        <select class="o_measurement_unit form-select">
                            <option value="mm">mm</option>
                            <option value="cm" selected="selected">cm</option>
                            <option value="m">m</option>
                            <option value="in">in</option>
                            <option value="ft">ft</option>
                        </select>
                    </label>

                    <label class="d-flex align-items-center gap-1 mb-0">
                        <span>Color:</span>
                        <input type="color" class="o_measurement_color form-control form-control-color" value="#0000FF"/>
                    </label>
                </t>

                <!-- Preview -->
                <div class="d-flex align-items-center gap-1 ms-auto">
                    <div class="o_sketch_preview me-2" t-ref="preview"></div>

                    <label class="d-flex align-items-center gap-1 mb-0">
                        <span>Quality:</span>
                        <select class="o_sketch_quality form-select">
                            <option value="60">Low (60%)</option>
                            <option value="80">Medium (80%)</option>
                            <option value="92" selected="selected">High (92%)</option>
                            <option value="100">Best (100%)</option>
                        </select>
                    </label>
                </div>
            </div>

            <!-- Canvas container -->
            <div class="o_sketch_canvas_container flex-grow-1 position-relative" t-ref="container">
                <canvas class="w-100 h-100" t-ref="canvas"></canvas>

                <!-- Measurement input (floating) -->
                <t t-if="state.showMeasurementInput">
                    <div class="o_measurement_input position-absolute card p-2 shadow"
                         t-att-style="'left: ' + state.measurementPosition.x + 'px; top: ' + state.measurementPosition.y + 'px; transform: translate(-50%, -50%)'">
                        <div class="input-group">
                            <input type="number" class="form-control"
                                   placeholder="Measurement"
                                   t-model="state.currentMeasurement"
                                   t-ref="measurementInput"/>
                            <span class="input-group-text" t-ref="measurementUnit">
                                <t t-esc="state.measurementUnit"/>
                            </span>
                        </div>
                        <small class="text-muted">Press Enter to save, Esc to cancel</small>
                    </div>
                </t>
            </div>

            <!-- Action buttons -->
            <div class="o_sketch_actions d-flex p-2 gap-2 border-top">
                <button type="button" class="btn btn-secondary o_sketch_undo">
                    <i class="fa fa-undo"/> Undo
                </button>
                <button type="button" class="btn btn-secondary o_sketch_redo">
                    <i class="fa fa-repeat"/> Redo
                </button>
                <button type="button" class="btn btn-danger o_sketch_clear">
                    <i class="fa fa-trash"/> Clear
                </button>
                <button type="button" class="btn btn-primary o_sketch_save ms-auto">
                    <i class="fa fa-save"/> Save
                </button>
            </div>
        </div>
    </t>
</templates>
