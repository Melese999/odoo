<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <data>
        <!-- Automated Action for Lead Creation & Update -->
        <record id="action_server_update_kpi_on_lead_change" model="ir.actions.server">
            <field name="name">KPI: Update targets on lead change</field>
            <field name="model_id" ref="crm.model_crm_lead"/>
            <field name="state">code</field>
            <field name="code">
                if record.user_id:
                env['kpi.target']._update_targets_for_user(record.user_id.id, 'crm.lead')
            </field>
        </record>

        <!-- Automated Action for Phone Call Creation & Update -->
        <record id="action_server_update_kpi_on_phonecall_change" model="ir.actions.server">
            <field name="name">KPI: Update targets on new phonecall</field>
            <field name="model_id" ref="crm_phonecall.model_crm_phonecall"/>
            <field name="state">code</field>
            <field name="code">
                if record.user_id:
                env['kpi.target']._update_targets_for_user(record.user_id.id, 'crm.phonecall')
            </field>
        </record>
    </data>
</odoo>